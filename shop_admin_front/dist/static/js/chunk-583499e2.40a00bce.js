(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-583499e2"],{1016:function(t,e,n){"use strict";n("d886")},"4e82":function(t,e,n){"use strict";var a=n("23e7"),r=n("1c0b"),o=n("7b0b"),i=n("d039"),u=n("a640"),l=[],c=l.sort,s=i((function(){l.sort(void 0)})),d=i((function(){l.sort(null)})),f=u("sort"),p=s||!d||!f;a({target:"Array",proto:!0,forced:p},{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),r(t))}})},d886:function(t,e,n){},e53f:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"g",(function(){return i})),n.d(e,"d",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return s}));var a=n("b775");function r(t){return Object(a["a"])({url:"/v1/jobs",method:"get",params:t})}function o(t,e){return Object(a["a"])({url:"/v1/jobs/"+t,method:"put",params:e})}function i(t){return Object(a["a"])({url:"/v1/jobs/"+t,method:"get"})}function u(t){return Object(a["a"])({url:"/v1/jobs/store",method:"post",data:t})}function l(t,e){return Object(a["a"])({url:"/v1/jobs/edit/"+t,method:"post",data:e})}function c(t){return Object(a["a"])({url:"/v1/jobs/report",method:"POST",data:t})}function s(t){return Object(a["a"])({url:"/v1/jobs/report_status",method:"POST",data:t})}},fac5:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"demo-input-suffix"},[[t._v(" 职位状态: "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],[n("el-input",{staticStyle:{width:"160px","margin-right":"10px","margin-left":"16px"},attrs:{placeholder:"请输入职位名称","prefix-icon":"el-icon-search"},model:{value:t.search_name,callback:function(e){t.search_name=e},expression:"search_name"}}),n("el-button",{attrs:{type:"primary"},on:{click:t.fetchData}},[t._v("搜索")]),n("el-button",{attrs:{type:"primary"},on:{click:t.createJob}},[t._v("新增职位")])]],2),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),n("el-table-column",{attrs:{label:"职位名称",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),n("el-table-column",{attrs:{label:"浏览量",width:"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.view_count))])]}}])}),n("el-table-column",{attrs:{label:"报名量",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.report_count)+" ")]}}])}),n("el-table-column",{attrs:{label:"招募人数",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.employ_count)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",prop:"created_at",label:"申请时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.created_at))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"商户状态",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?n("span",[t._v(" 待审核 ")]):1==e.row.status?n("span",[t._v(" 上架 "),n("span",{staticStyle:{color:"red"}},[t._v(t._s(e.row.audit_log?"(修改待系统审核)":"")+" ")])]):n("span",[t._v("下架")])]}}])}),n("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(n){return t.updateStore(e.row)}}},[t._v("编辑 ")]),1===parseInt(e.row.status)?n("el-button",{attrs:{type:"primary",icon:"el-icon-bottom"},on:{click:function(n){return t.downStore(e.row)}}},[t._v("下架 ")]):t._e(),2===parseInt(e.row.status)?n("el-button",{attrs:{type:"primary",icon:"el-icon-top"},on:{click:function(n){return t.upStore(e.row)}}},[t._v("上架 ")]):t._e(),n("el-button",{attrs:{type:"primary",icon:"el-icon-top"},on:{click:function(n){return t.showReport(e.row)}}},[t._v("查看报名信息 ")])]}}])})],1),n("el-pagination",{staticStyle:{float:"right","margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.currentPageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)},r=[],o=(n("4e82"),n("e53f")),i={filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data:function(){return{list:null,listLoading:!0,visible:!1,auditReason:"",total:0,options:[{value:"-1",label:"全部"},{value:"0",label:"待审核"},{value:"1",label:"上架"},{value:"2",label:"下架"}],value:"-1",search_name:"",currentPage:1,currentPageSize:10}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.listLoading=!0,Object(o["b"])({name:this.search_name,status:this.value,skip:(this.currentPage-1)*this.currentPageSize,limit:this.currentPageSize}).then((function(e){t.list=e.data.items,t.total=e.data.total,t.listLoading=!1}))},createJob:function(){this.$router.push({name:"editJob"})},switchChange:function(t){Object(o["c"])(t.id,{is_top:t.is_top?1:0}).then((function(t){console.log(t)}))},handleSortChange:function(t,e){Object(o["c"])(t.id,{sort:t.sort}).then((function(t){console.log(t)}))},upStore:function(t){var e=this,n=this.$loading({lock:!0,text:"数据提交中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(o["c"])(t.id,{status:1}).then((function(t){e.visible=!1,n.close(),e.fetchData()}))},downStore:function(t){var e=this,n=this.$loading({lock:!0,text:"数据提交中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(o["c"])(t.id,{status:2}).then((function(t){e.visible=!1,n.close(),e.fetchData()}))},auditStore:function(t,e){var n=this,a=this.$loading({lock:!0,text:"数据提交中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(o["c"])(t.id,{status:e}).then((function(t){n.visible=!1,a.close(),n.fetchData()}))},updateStore:function(t){this.$router.push({name:"editJob",query:{id:t.id}})},handleCurrentChange:function(t){this.fetchData()},showReport:function(t){this.$router.push({name:"reportList",query:{id:t.id}})}}},u=i,l=(n("1016"),n("2877")),c=Object(l["a"])(u,a,r,!1,null,null,null);e["default"]=c.exports}}]);