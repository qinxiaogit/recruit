(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58c5eb28"],{"4e82":function(t,e,n){"use strict";var a=n("23e7"),r=n("1c0b"),o=n("7b0b"),i=n("d039"),l=n("a640"),s=[],u=s.sort,c=i((function(){s.sort(void 0)})),d=i((function(){s.sort(null)})),p=l("sort"),f=c||!d||!p;a({target:"Array",proto:!0,forced:f},{sort:function(t){return void 0===t?u.call(o(this)):u.call(o(this),r(t))}})},"655d":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"demo-input-suffix"},[[t._v(" 处理状态: "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],[t._v(" 性别: "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.sex,callback:function(e){t.sex=e},expression:"sex"}},t._l(t.sexs,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],[t._v(" 职位: "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.job,callback:function(e){t.job=e},expression:"job"}},t._l(t.jobs,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],[t._v(" 报名时间 "),n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","picker-options":t.pickerOptions},model:{value:t.report_time,callback:function(e){t.report_time=e},expression:"report_time"}})],n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.fetchData}},[t._v("搜索")])],2),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),n("el-table-column",{attrs:{label:"联系方式",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.report_user?e.row.report_user.mobile:""))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"用户名",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.report_user?e.row.report_user.real_name:"")+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"性别",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.report_user?1==e.row.report_user.sex?"男":"女":"")+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"年龄",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.report_user?e.row.report_user.age:"")+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"职位",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.report_job?e.row.report_job.name:"")+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"报名时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.created_at)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"处理状态",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?n("span",[t._v(" 待录用 ")]):1==e.row.status?n("span",[t._v(" 已录用("),n("span",{staticStyle:{color:"#4caf50"}},[t._v("通过")]),t._v(") ")]):n("span",[t._v("不录用("),n("span",{staticStyle:{color:"red"}},[t._v("驳回")]),t._v(")")])]}}])}),n("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"top",width:"400"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("p",[t._v("投诉处理结果？")]),n("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.auditReason,callback:function(e){t.auditReason=e},expression:"auditReason"}},[n("template",{slot:"prepend"},[t._v("操作原因")])],2),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return t.auditStore(e.row,1)}}},[t._v("录用")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.auditStore(e.row,2)}}},[t._v("不录用")])],1),0===parseInt(e.row.status)?n("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-position"},on:{click:function(n){return t.employHandle(e.row)}},slot:"reference"},[t._v(" 待录用 ")]):t._e()],1),1===parseInt(e.row.status)?n("el-button",{attrs:{type:"primary",disabled:"",icon:"el-icon-bottom"},on:{click:function(n){return t.downStore(e.row)}}},[t._v("已录用 ")]):t._e(),2===parseInt(e.row.status)?n("el-button",{attrs:{type:"primary",disabled:"",icon:"el-icon-top"},on:{click:function(n){return t.upStore(e.row)}}},[t._v("已驳回 ")]):t._e()]}}])})],1),n("el-pagination",{staticStyle:{float:"right","margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.currentPageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)},r=[],o=(n("4e82"),n("b0c0"),n("e53f")),i=n("f9a4"),l={components:{IcSlider:i["IcSlider"],IcSliderItem:i["IcSliderItem"]},filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data:function(){return{list:null,listLoading:!0,visible:!1,auditReason:"",total:0,options:[{value:"-1",label:"全部"},{value:"0",label:"待处理"},{value:"1",label:"已处理"}],sexs:[{value:"-1",label:"全部"},{value:"0",label:"未知"},{value:"1",label:"男"},{value:"2",label:"女"}],jobs:[{value:"-1",label:"全部"}],job:"-1",value:"-1",sex:"-1",value2:"0",search_name:"",currentPage:1,currentPageSize:10,report_time:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}}]}}},created:function(){this.fetchData(),this.initJobs()},methods:{employHandle:function(t){this.visible=!0,this.$prompt("请输入操作原因","录用结果",{confirmButtonText:"录用",cancelButtonText:"不录用",callback:function(e,n){console.log(e),console.log(n),Object(o["g"])({report_id:t.id,status:"cancel"===e?2:1,reason:n.inputValue}).then((function(t){console.log(t)}))}})},fetchData:function(){var t=this;this.listLoading=!0;var e=this.job;1===this.jobs.length&&parseInt(this.$route.query.id)>0&&(e=parseInt(this.$route.query.id)),console.log(this.report_time);var n="",a="";this.report_time&&(n=this.report_time[0]/1e3,a=this.report_time[1]/1e3),Object(o["f"])({status:this.value,skip:(this.currentPage-1)*this.currentPageSize,limit:this.currentPageSize,sex:this.sex,job_id:e,report_start_time:n,report_end_time:a}).then((function(e){t.list=e.data.items,t.total=e.data.total,t.listLoading=!1}))},switchChange:function(t){UpdateJob(t.id,{is_top:t.is_top?1:0}).then((function(t){console.log(t)}))},handleSortChange:function(t,e){UpdateJob(t.id,{sort:t.sort}).then((function(t){console.log(t)}))},upStore:function(t){var e=this,n=this.$loading({lock:!0,text:"数据提交中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});UpdateJob(t.id,{status:1}).then((function(t){e.visible=!1,n.close(),e.fetchData()}))},downStore:function(t){var e=this,n=this.$loading({lock:!0,text:"数据提交中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});UpdateJob(t.id,{status:2}).then((function(t){e.visible=!1,n.close(),e.fetchData()}))},auditStore:function(t,e){var n=this,a=this.$loading({lock:!0,text:"数据提交中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});AuditFeed({id:t.id,status:e,reason:this.auditReason}).then((function(t){n.visible=!1,a.close(),n.fetchData()}))},updateStore:function(t){this.$router.push({name:"updateStore",query:{id:t.id}})},handleCurrentChange:function(t){this.fetchData()},initJobs:function(){var t=this;Object(o["b"])().then((function(e){for(var n=0;n<e.data.items.length;n++)t.jobs.push({label:e.data.items[n].name,value:e.data.items[n].id});t.job=parseInt(t.$route.query.id)}))}}},s=l,u=(n("f076"),n("2877")),c=Object(u["a"])(s,a,r,!1,null,null,null);e["default"]=c.exports},"86ae":function(t,e,n){},e53f:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"h",(function(){return i})),n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"e",(function(){return d}));var a=n("b775");function r(t){return Object(a["a"])({url:"/v1/jobs",method:"get",params:t})}function o(t,e){return Object(a["a"])({url:"/v1/jobs/"+t,method:"put",params:e})}function i(t){return Object(a["a"])({url:"/v1/jobs/"+t,method:"get"})}function l(t){return Object(a["a"])({url:"/v1/jobs/store",method:"post",data:t})}function s(t,e){return Object(a["a"])({url:"/v1/jobs/edit/"+t,method:"post",data:e})}function u(t){return Object(a["a"])({url:"/v1/jobs/report",method:"POST",data:t})}function c(t){return Object(a["a"])({url:"/v1/jobs/report_status",method:"POST",data:t})}function d(t,e){return Object(a["a"])({url:"/v1/jobs/"+t,method:"DELETE",data:e})}},f076:function(t,e,n){"use strict";n("86ae")}}]);