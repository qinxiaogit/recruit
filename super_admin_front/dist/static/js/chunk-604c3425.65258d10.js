(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-604c3425"],{"27a0":function(t,e,n){"use strict";n("4a75")},"4a75":function(t,e,n){},bb50:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"demo-input-suffix"},[[t._v(" 商家状态: "),n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],[n("el-input",{staticStyle:{width:"160px","margin-right":"10px","margin-left":"16px"},attrs:{placeholder:"请输入商家名称","prefix-icon":"el-icon-search"},model:{value:t.search_name,callback:function(e){t.search_name=e},expression:"search_name"}}),n("el-button",{attrs:{type:"primary"},on:{click:t.fetchData}},[t._v("搜索")])]],2),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"ID",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.id)+" ")]}}])}),n("el-table-column",{attrs:{label:"店铺名称",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name)+" ")]}}])}),n("el-table-column",{attrs:{label:"商户余额",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.balance))])]}}])}),n("el-table-column",{attrs:{label:"今日报名数",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.today_report_count)+" ")]}}])}),n("el-table-column",{attrs:{label:"营业执照",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.row.business_license,fit:"cover"}})]}}])}),n("el-table-column",{attrs:{label:"联系方式",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.contact))])]}}])}),n("el-table-column",{attrs:{label:"logo",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("el-image",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.row.logo,fit:"cover"}})]}}])}),n("el-table-column",{attrs:{label:"管理员账号",width:"90",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dialog",{attrs:{placement:"top",width:"400px",height:"350px",visible:t.visibleAccount,title:"编辑商户账号密码"},on:{"update:visible":function(e){t.visibleAccount=e}}},[n("el-input",{attrs:{"show-password":"",minlength:"6",placeholder:"请输入新的密码"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.changePasswordClick(e.$index,e.row)}}},[t._v("确 定")])],1)],1),n("span",[t._v(t._s(e.row.admins?e.row.admins.username:""))])]}}])}),n("el-table-column",{attrs:{"class-name":"status-col",label:"在线职位数",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.online_count)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",prop:"created_at",label:"申请时间",width:"120x'/\n.];l'[po09-[]\n"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.created_at))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"商户状态",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?n("span",[t._v(" 待审核 ")]):1==e.row.status?n("span",[t._v(" 上架 ")]):n("span",[t._v("下架")])]}}])}),n("el-table-column",{attrs:{align:"center",prop:"created_at",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticStyle:{display:"none"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(n){return t.updateStore(e.row)}}},[t._v("编辑 ")]),n("el-dialog",{attrs:{placement:"top",width:"350",height:"300",visible:t.visible,title:"企业入驻审核结果"},on:{"update:visible":function(e){t.visible=e}}},[n("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.auditReason,callback:function(e){t.auditReason=e},expression:"auditReason"}},[n("template",{slot:"prepend"},[t._v("审核操作原因")])],2),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return t.auditStore(e.row,0)}}},[t._v("审核通过")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.auditStore(e.row,1)}}},[t._v("审核驳回")])],1)],1),0===parseInt(e.row.status)?n("el-button",{attrs:{slot:"reference",type:"primary",icon:"el-icon-position"},on:{click:function(n){return t.storeAudit(e.row)}},slot:"reference"},[t._v(" 审核 ")]):t._e(),1===parseInt(e.row.status)?n("el-button",{attrs:{type:"primary",icon:"el-icon-bottom"},on:{click:function(n){return t.downStore(e.row)}}},[t._v("下架 ")]):t._e(),2===parseInt(e.row.status)?n("el-button",{attrs:{type:"primary",icon:"el-icon-top"},on:{click:function(n){return t.upStore(e.row)}}},[t._v("上架 ")]):t._e(),n("el-dialog",{attrs:{title:"商户余额变更",visible:t.visibleBalance,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.visibleBalance=e}}},[n("el-input",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:"请输入变更原因"},model:{value:t.balanceReason,callback:function(e){t.balanceReason=e},expression:"balanceReason"}},[n("template",{slot:"prepend"},[t._v("变更原因")])],2),n("el-switch",{staticStyle:{"margin-right":"10px"},attrs:{"active-text":"增加","inactive-text":"扣除"},model:{value:t.changeBalanceMethod,callback:function(e){t.changeBalanceMethod=e},expression:"changeBalanceMethod"}}),n("el-input-number",{attrs:{min:1,max:1e4,label:"变更余额"},model:{value:t.changeBalance,callback:function(e){t.changeBalance=e},expression:"changeBalance"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.visibleBalance=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.changeBalanceClick(e.$index,e.row)}}},[t._v("确 定")])],1)],1),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-top"},on:{click:function(n){return t.changeBalanceClickShow(e.row)}}},[t._v("余额变更 ")]),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-top"},on:{click:function(n){return t.clickEditAdminPasswordShow(e.row)}}},[t._v("修改管理员密码 ")])]}}])})],1),n("el-pagination",{staticStyle:{float:"right","margin-top":"20px"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.currentPageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)},i=[],l=n("b775");n("3fd3");function o(t){return console.log(t),Object(l["a"])({url:"/v1/store",method:"post",data:t})}function c(t){return Object(l["a"])({url:"/v1/store/audit",method:"post",data:t})}function r(t){return Object(l["a"])({url:"/v1/store/status",method:"post",data:t})}function s(t){return Object(l["a"])({url:"/v1/store/balance",method:"post",data:t})}function u(t){return Object(l["a"])({url:"/v1/store/password",method:"post",data:t})}var d={filters:{statusFilter:function(t){var e={published:"success",draft:"gray",deleted:"danger"};return e[t]}},data:function(){return{list:null,listLoading:!0,visibleAccount:!1,newPassword:"",visible:!1,auditReason:"",total:0,options:[{value:"-1",label:"全部"},{value:"0",label:"待审核"},{value:"1",label:"上架"},{value:"2",label:"下架"}],value:"-1",search_name:"",currentPage:1,currentPageSize:10,visibleBalance:!1,balanceReason:"",changeBalance:0,changeBalanceMethod:!0,balanceId:0}},created:function(){this.fetchData()},methods:{changeBalanceClickShow:function(t){this.visibleBalance=!0,this.balanceId=t.id},clickEditAdminPasswordShow:function(t){this.balanceId=t.id,this.visibleAccount=!0},handleClose:function(){this.visibleBalance=!1,this.visibleAccount=!1},changePasswordClick:function(t,e){var n=this;u({store_id:this.balanceId,password:this.newPassword}).then((function(t){n.visibleBalance=!1,n.visibleAccount=!1,n.fetchData()}))},changeBalanceClick:function(t,e){var n=this;s({store_id:this.balanceId,amount:this.changeBalance,direction:this.changeBalanceMethod?1:2,reason:this.balanceReason}).then((function(t){n.visibleBalance=!1,n.fetchData()}))},fetchData:function(){var t=this;this.listLoading=!0,o({name:this.search_name,status:this.value,skip:(this.currentPage-1)*this.currentPageSize,limit:this.currentPageSize}).then((function(e){t.list=e.data.items,t.total=e.data.total,t.listLoading=!1}))},upStore:function(t){var e=this,n=this.$loading({lock:!0,text:"数据提交中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});r({id:t.id,option:"up"}).then((function(t){e.visible=!1,n.close(),e.fetchData()}))},downStore:function(t){var e=this,n=this.$loading({lock:!0,text:"数据提交中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});r({id:t.id,option:"down"}).then((function(t){e.visible=!1,n.close(),e.fetchData()}))},auditStore:function(t,e){var n=this,a=this.$loading({lock:!0,text:"数据提交中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});c({id:this.balanceId,status:e,reason:this.auditReason}).then((function(t){n.visible=!1,a.close(),n.fetchData()}))},updateStore:function(t){this.$router.push({name:"updateStore",query:{id:t.id}})},handleCurrentChange:function(t){this.fetchData()},storeAudit:function(t){console.log("aaaa"),this.visible=!0,this.balanceId=t.id,console.log(t.id)}}},p=d,h=(n("27a0"),n("2877")),f=Object(h["a"])(p,a,i,!1,null,null,null);e["default"]=f.exports}}]);